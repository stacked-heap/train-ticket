apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-admin-basic-info-service
spec:
  selector:
    matchLabels:
      app: ts-admin-basic-info-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-admin-basic-info-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-admin-basic-info-service
          image: codewisdom/ts-admin-basic-info-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];adminbasic.AdminBasicInfoApplication[restTemplate,main,AdminBasicInfoApplication];adminbasic.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];adminbasic.controller.AdminBasicInfoController[modifyConfig,getAllPrices,modifyStation,addPrice,getAllStations,modifyPrice,home,addContacts,getAllTrains,deletePrice,deleteContacts,deleteConfig,AdminBasicInfoController,addConfig,modifyTrain,addStation,deleteTrain,addTrain,getAllConfigs,getAllContacts,modifyContacts,deleteStation];adminbasic.entity.PriceInfo[setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId,PriceInfo];adminbasic.service.AdminBasicInfoService[modifyConfig,modifyContact,getAllPrices,modifyStation,addPrice,addContact,getAllStations,AdminBasicInfoService,modifyPrice,getAllTrains,deletePrice,deleteConfig,addConfig,deleteContact,modifyTrain,addStation,deleteTrain,addTrain,getAllConfigs,getAllContacts,deleteStation];adminbasic.service.AdminBasicInfoServiceImpl[modifyConfig,modifyContact,getServiceUrl,getAllPrices,modifyStation,addPrice,AdminBasicInfoServiceImpl,addContact,getAllStations,modifyPrice,getAllTrains,deletePrice,deleteConfig,addConfig,deleteContact,modifyTrain,addStation,deleteTrain,addTrain,getAllConfigs,getAllContacts,deleteStation];adminbasic.controller.AdminBasicInfoControllerTest[testGetAllStations,testGetAllConfigs,testGetAllContacts,testGetAllPrices,testAddPrice,testDeleteConfig,testAddContacts,testModifyPrice,testHome,testModifyContacts,testGetAllTrains,testAddConfig,testDeletePrice,testModifyTrain,testAddTrain,AdminBasicInfoControllerTest,testDeleteContacts,setUp,testModifyStation,testDeleteStation,testDeleteTrain,testModifyConfig,testAddStation];adminbasic.service.AdminBasicInfoServiceImplTest[testGetAllStations,testGetAllConfigs,testGetAllContacts,testModifyContact,testGetAllPrices,testAddPrice,testDeleteConfig,testModifyPrice,AdminBasicInfoServiceImplTest,testGetAllTrains,testAddConfig,testDeletePrice,testAddContact,testDeleteContact,testAddTrain,testModifyTrain,setUp,testModifyStation,testDeleteStation,testDeleteTrain,testModifyConfig,testAddStation];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 18767
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 18767
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-admin-order-service
spec:
  selector:
    matchLabels:
      app: ts-admin-order-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-admin-order-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-admin-order-service
          image: codewisdom/ts-admin-order-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];adminorder.AdminOrderApplication[AdminOrderApplication,restTemplate,main];adminorder.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];adminorder.controller.AdminOrderController[AdminOrderController,addOrder,updateOrder,deleteOrder,home,getAllOrders];adminorder.service.AdminOrderService[addOrder,updateOrder,deleteOrder,AdminOrderService,getAllOrders];adminorder.service.AdminOrderServiceImpl[getServiceUrl,addOrder,updateOrder,deleteOrder,AdminOrderServiceImpl,getAllOrders];adminorder.controller.AdminOrderControllerTest[AdminOrderControllerTest,testDeleteOrder,testHome,testUpdateOrder,testGetAllOrders,testAddOrder,setUp];adminorder.service.AdminOrderServiceImplTest[testDeleteOrder2,testDeleteOrder1,testAddOrder2,testGetAllOrders1,testAddOrder1,AdminOrderServiceImplTest,setUp,testUpdateOrder1,testUpdateOrder2,testGetAllOrders2];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 16112
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 16112
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-admin-route-service
spec:
  selector:
    matchLabels:
      app: ts-admin-route-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-admin-route-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-admin-route-service
          image: codewisdom/ts-admin-route-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];adminroute.AdminRouteApplication[restTemplate,main,AdminRouteApplication];adminroute.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];adminroute.controller.AdminRouteController[addRoute,deleteRoute,AdminRouteController,getAllRoutes,home];adminroute.service.AdminRouteService[createAndModifyRoute,deleteRoute,AdminRouteService,getAllRoutes];adminroute.service.AdminRouteServiceImpl[getServiceUrl,AdminRouteServiceImpl,checkStationsExists,createAndModifyRoute,deleteRoute,getAllRoutes];adminroute.controller.AdminRouteControllerTest[testHome,testGetAllRoutes,testDeleteRoute,setUp,testAddRoute,AdminRouteControllerTest];adminroute.service.AdminRouteServiceImplTest[testGetAllRoutes,testDeleteRoute,setUp,testCreateAndModifyRoute,AdminRouteServiceImplTest];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 16113
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 16113
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-admin-travel-service
spec:
  selector:
    matchLabels:
      app: ts-admin-travel-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-admin-travel-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-admin-travel-service
          image: codewisdom/ts-admin-travel-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];admintravel.AdminTravelApplication[restTemplate,AdminTravelApplication,main];admintravel.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];admintravel.controller.AdminTravelController[addTravel,updateTravel,deleteTravel,AdminTravelController,getAllTravels,home];admintravel.service.AdminTravelService[addTravel,updateTravel,deleteTravel,getAllTravels,AdminTravelService];admintravel.service.AdminTravelServiceImpl[checkTravelInfo,getServiceUrl,getRouteByRouteId,addTravel,updateTravel,checkStationsExists,deleteTravel,AdminTravelServiceImpl,queryTrainTypeByName,getAllTravels];admintravel.controller.AdminTravelControllerTest[testAddTravel,testHome,AdminTravelControllerTest,testGetAllTravels,setUp,testUpdateTravel,testDeleteTravel];admintravel.service.AdminTravelServiceImplTest[testDeleteTravel2,testDeleteTravel1,AdminTravelServiceImplTest,testGetAllTravels2,setUp,testGetAllTravels1,testAddTravel4,testAddTravel3,testAddTravel2,testUpdateTravel2,testAddTravel1,testUpdateTravel1];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 16114
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 16114
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-admin-user-service
spec:
  selector:
    matchLabels:
      app: ts-admin-user-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-admin-user-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-admin-user-service
          image: codewisdom/ts-admin-user-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];adminuser.AdminUserApplication[AdminUserApplication,restTemplate,main];adminuser.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];adminuser.controller.AdminUserController[getAllUsers,addUser,deleteUser,updateUser,AdminUserController,home];adminuser.dto.UserDto[setPassword,UserDto,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];adminuser.service.AdminUserService[getAllUsers,AdminUserService,addUser,deleteUser,updateUser];adminuser.service.AdminUserServiceImpl[getAllUsers,AdminUserServiceImpl,getServiceUrl,addUser,deleteUser,updateUser];adminuser.controller.AdminUserControllerTest[testHome,testGetAllUsers,testDeleteUser,testUpdateUser,setUp,AdminUserControllerTest,testAddUser];adminuser.service.AdminUserServiceImplTest[AdminUserServiceImplTest,testGetAllUsers,testDeleteUser,testUpdateUser,setUp,testAddUser];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 16115
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 16115
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-assurance-service
spec:
  selector:
    matchLabels:
      app: ts-assurance-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-assurance-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-assurance-service
          image: codewisdom/ts-assurance-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];assurance.AssuranceApplication[AssuranceApplication,restTemplate,main];assurance.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];assurance.controller.AssuranceController[getAllAssuranceType,AssuranceController,createNewAssurance,modifyAssurance,deleteAssuranceByOrderId,getAllAssurances,findAssuranceByOrderId,deleteAssurance,getAssuranceById,home];assurance.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];assurance.entity.AssuranceTypeBean[setName,getName,getIndex,setIndex,AssuranceTypeBean,setPrice,getPrice];assurance.entity.PlainAssurance[PlainAssurance,getTypePrice,setTypeName,getOrderId,setId,getId,getTypeIndex,setTypeIndex,getTypeName,setOrderId,setTypePrice];assurance.init.InitData[InitData,run];assurance.repository.AssuranceRepository[AssuranceRepository,findById,findByOrderId,deleteById,removeAssuranceByOrderId,findAll];assurance.service.AssuranceService[AssuranceService,deleteByOrderId,modify,findAssuranceById,findAssuranceByOrderId,deleteById,getAllAssurances,create,getAllAssuranceTypes];assurance.service.AssuranceServiceImpl[deleteByOrderId,modify,findAssuranceById,findAssuranceByOrderId,deleteById,getAllAssurances,create,AssuranceServiceImpl,getAllAssuranceTypes];assurance.controller.AssuranceControllerTest[testHome,testCreateNewAssurance,testGetAssuranceById,testModifyAssurance,testGetAllAssuranceType,testFindAssuranceByOrderId,AssuranceControllerTest,setUp,testDeleteAssurance,testDeleteAssuranceByOrderId,testGetAllAssurances];assurance.service.AssuranceServiceImplTest[tesCreate2,testCreate3,testCreate1,testGetAllAssurances1,testGetAllAssurances2,AssuranceServiceImplTest,testFindAssuranceByOrderId1,testFindAssuranceByOrderId2,testDeleteByOrderId1,testDeleteByOrderId2,testFindAssuranceById2,testFindAssuranceById1,setUp,testModify3,testModify2,testDeleteById1,testGetAllAssuranceTypes,testDeleteById2];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-assurance-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 18888
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 18888
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-auth-service
spec:
  selector:
    matchLabels:
      app: ts-auth-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-auth-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-auth-service
          image: codewisdom/ts-auth-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];auth.AuthApplication[AuthApplication,restTemplate,main];auth.config.WebSecurityConfig[passwordEncoder,authenticationManager,configureAuthentication,corsConfigurer,WebSecurityConfig,configure];auth.constant.AuthConstant[AuthConstant];auth.constant.InfoConstant[InfoConstant];auth.controller.AuthController[createDefaultUser,getHello,AuthController];auth.controller.UserController[getToken,getAllUser,UserController,getHello,deleteUserById];auth.dto.AuthDto[setPassword,getPassword,setUserName,AuthDto,getUserName,getUserId,setUserId];auth.dto.BasicAuthDto[getVerificationCode,setPassword,getPassword,setUsername,getSerialVersionUID,setVerificationCode,setSerialVersionUID,BasicAuthDto,getUsername];auth.dto.TokenDto[setUsername,getSerialVersionUID,setToken,getToken,TokenDto,setSerialVersionUID,getUserId,getUsername,setUserId];auth.entity.User[setPassword,User,setUsername,isAccountNonLocked,getAuthorities,getUsername,getPassword,isAccountNonExpired,isCredentialsNonExpired,isEnabled,setRoles,getUserId,getRoles,setUserId];auth.exception.handler.GlobalExceptionHandler[GlobalExceptionHandler,handleUserNotFoundException];auth.exception.UserOperationException[UserOperationException];auth.init.InitUser[InitUser,run];auth.repository.UserRepository[UserRepository,findByUsername,deleteByUserId];auth.security.jwt.JWTProvider[init,createToken,JWTProvider];auth.security.UserDetailsServiceImpl[UserDetailsServiceImpl,loadUserByUsername];auth.service.impl.TokenServiceImpl[TokenServiceImpl,getServiceUrl,getToken];auth.service.impl.UserServiceImpl[UserServiceImpl,getAllUser,checkUserCreateInfo,saveUser,createDefaultAuthUser,deleteByUserId];auth.service.TokenService[getToken,TokenService];auth.service.UserService[UserService,getAllUser,saveUser,createDefaultAuthUser,deleteByUserId];auth.controller.AuthControllerTest[AuthControllerTest,testGetHello,setUp,testCreateDefaultUser];auth.controller.UserControllerTest[UserControllerTest,testGetHello,testGetAllUser,setUp,testDeleteUserById,testGetToken];auth.service.TokenServiceImplTest[TokenServiceImplTest,setUp,testGetToken1,testGetToken2];auth.service.UserServiceImplTest[UserServiceImplTest,testSaveUser,testGetAllUser,setUp,testDeleteByUserId,testCreateDefaultAuthUser];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-auth-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 12340
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 12340
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-avatar-service
spec:
  selector:
    matchLabels:
      app: ts-avatar-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-avatar-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-avatar-service
          image:  codewisdom/ts-avatar-service:0.2.0
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: 
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 17001
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 17001
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-basic-service
spec:
  selector:
    matchLabels:
      app: ts-basic-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-basic-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-basic-service
          image: codewisdom/ts-basic-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];fdse.microservice.BasicApplication[restTemplate,main,BasicApplication];fdse.microservice.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];fdse.microservice.controller.BasicController[queryForStationId,queryForTravel,queryForTravels,BasicController,home];fdse.microservice.service.BasicService[BasicService,queryForStationId,queryForTravel,queryForTravels];fdse.microservice.service.BasicServiceImpl[getServiceUrl,BasicServiceImpl,getRouteByRouteId,checkStationsExists,queryPriceConfigByRouteIdsAndTrainTypes,queryTrainTypeByName,queryForTravel,queryTrainTypeByNames,checkStationExists,queryForStationId,getRoutesByRouteIds,queryPriceConfigByRouteIdAndTrainType,queryForTravels];fdse.microservice.controller.BasicControllerTest[testHome,testQueryForStationId,testQueryForTravel,BasicControllerTest,setUp];fdse.microservice.service.BasicServiceImplTest[testQueryForStationId,testQueryForTravel,testCheckStationExists,testQueryTrainType,BasicServiceImplTest,setUp];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 15680
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 15680
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-cancel-service
spec:
  selector:
    matchLabels:
      app: ts-cancel-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-cancel-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-cancel-service
          image: codewisdom/ts-cancel-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];cancel.CancelApplication[CancelApplication,restTemplate,main];cancel.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];cancel.controller.CancelController[cancelTicket,calculate,CancelController,home];cancel.entity.GetAccountByIdInfo[getAccountId,GetAccountByIdInfo,setAccountId];cancel.entity.GetAccountByIdResult[getAccount,getMessage,setAccount,getStatus,setMessage,GetAccountByIdResult,setStatus];cancel.entity.GetOrderByIdInfo[GetOrderByIdInfo,getOrderId,setOrderId];cancel.service.CancelService[cancelOrder,calculateRefund,CancelService];cancel.service.CancelServiceImpl[getOrderByIdFromOrderOther,getServiceUrl,sendEmail,cancelFromOrder,cancelOrder,CancelServiceImpl,getAccount,cancelFromOtherOrder,calculateRefund,getAuthorizationHeadersFrom,getOrderByIdFromOrder,drawbackMoney];cancel.controller.CancelControllerTest[testHome,testCancelTicket,testCalculate,CancelControllerTest,setUp];cancel.service.CancelServiceImplTest[testCancelOrder2,testSendEmail,testCalculateRefund1,testCalculateRefund2,testGetAccount,setUp,CancelServiceImplTest,testDrawbackMoney,testCancelOrder1];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 18885
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 18885
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-config-service
spec:
  selector:
    matchLabels:
      app: ts-config-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-config-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-config-service
          image: codewisdom/ts-config-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];config.ConfigApplication[ConfigApplication,restTemplate,main];config.controller.ConfigController[deleteConfig,updateConfig,retrieve,createConfig,ConfigController,queryAll,home];config.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];config.init.InitData[InitData,run];config.repository.ConfigRepository[ConfigRepository,findByName,deleteByName,findAll];config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];config.service.ConfigService[ConfigService,query,create,update,queryAll,delete];config.service.ConfigServiceImpl[ConfigServiceImpl,query,create,update,queryAll,delete];config.controller.ConfigControllerTest[testHome,testQueryAll,testRetrieve,setUp,testCreateConfig,testUpdateConfig,testDeleteConfig,ConfigControllerTest];config.service.ConfigServiceImplTest[testQuery1,testCreate2,testCreate1,testQuery2,testUpdate1,testDelete2,testUpdate2,testDelete1,testQueryAll2,setUp,testQueryAll1,ConfigServiceImplTest];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-config-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 15679
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 15679
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-consign-price-service
spec:
  selector:
    matchLabels:
      app: ts-consign-price-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-consign-price-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-consign-price-service
          image: codewisdom/ts-consign-price-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];consignprice.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];consignprice.ConsignPriceApplication[ConsignPriceApplication,restTemplate,main];consignprice.controller.ConsignPriceController[ConsignPriceController,getPriceInfo,modifyPriceConfig,getPriceByWeightAndRegion,getPriceConfig,home];consignprice.entity.ConsignPrice[getBeyondPrice,setInitialWeight,getIndex,getInitialWeight,ConsignPrice,getWithinPrice,getId,getInitialPrice,setBeyondPrice,setIndex,setId,setInitialPrice,setWithinPrice];consignprice.init.InitData[InitData,run];consignprice.repository.ConsignPriceConfigRepository[findByIndex,ConsignPriceConfigRepository];consignprice.service.ConsignPriceService[ConsignPriceService,queryPriceInformation,createAndModifyPrice,getPriceByWeightAndRegion,getPriceConfig];consignprice.service.ConsignPriceServiceImpl[queryPriceInformation,createAndModifyPrice,ConsignPriceServiceImpl,getPriceByWeightAndRegion,getPriceConfig];consignprice.controller.ConsignPriceControllerTest[ConsignPriceControllerTest,testHome,testGetPriceConfig,testModifyPriceConfig,setUp,testGetPriceInfo,testGetPriceByWeightAndRegion];consignprice.service.ConsignPriceServiceImplTest[testQueryPriceInformation,testCreateAndModifyPrice2,testCreateAndModifyPrice1,testGetPriceConfig,testGetPriceByWeightAndRegion2,ConsignPriceServiceImplTest,setUp,testGetPriceByWeightAndRegion1,testGetPriceByWeightAndRegion3];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-consign-price-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 16110
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 16110
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-consign-service
spec:
  selector:
    matchLabels:
      app: ts-consign-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-consign-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-consign-service
          image: codewisdom/ts-consign-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];consign.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];consign.ConsignApplication[ConsignApplication,restTemplate,main];consign.controller.ConsignController[ConsignController,findByAccountId,findByOrderId,updateConsign,home,insertConsign,findByConsignee];consign.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];consign.entity.ConsignRecord[getConsignee,getPhone,setConsignee,getWeight,setFrom,ConsignRecord,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,setPrice,getPrice,getTargetDate,getAccountId,setId,setTo,getHandleDate,setAccountId,getFrom,setTargetDate];consign.entity.GetPriceDomain[setIsWithinRegion,GetPriceDomain,getWeight,setWeight,getIsWithinRegion];consign.entity.InsertConsignRecordResult[getMessage,InsertConsignRecordResult,getStatus,setMessage,setStatus];consign.init.InitData[InitData,run];consign.repository.ConsignRepository[findByAccountId,findByOrderId,findById,ConsignRepository,findByConsignee];consign.service.ConsignService[updateConsignRecord,ConsignService,queryByConsignee,queryByAccountId,queryByOrderId,insertConsignRecord];consign.service.ConsignServiceImpl[getServiceUrl,updateConsignRecord,queryByConsignee,queryByAccountId,ConsignServiceImpl,queryByOrderId,insertConsignRecord];consign.controller.ConsignControllerTest[testHome,testFindByConsignee,testUpdateConsign,testFindByOrderId,setUp,testInsertConsign,testFindByAccountId,ConsignControllerTest];consign.service.ConsignServiceImplTest[ConsignServiceImplTest,testQueryByConsignee1,testUpdateConsignRecord1,testUpdateConsignRecord2,testInsertConsignRecord,testQueryByAccountId1,setUp,testQueryByAccountId2,testQueryByOrderId1,testQueryByOrderId2,testQueryByConsignee2];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-consign-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 16111
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 16111
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-contacts-service
spec:
  selector:
    matchLabels:
      app: ts-contacts-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-contacts-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-contacts-service
          image: codewisdom/ts-contacts-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];contacts.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];contacts.ContactsApplication[restTemplate,main,ContactsApplication];contacts.controller.ContactsController[ContactsController,deleteContacts,createNewContactsAdmin,createNewContacts,findContactsByAccountId,getAllContacts,modifyContacts,home,getContactsByContactsId];contacts.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];contacts.init.InitData[InitData,run];contacts.repository.ContactsRepository[findByAccountId,findById,deleteById,ContactsRepository,findAll,findByAccountIdAndDocumentTypeAndDocumentType];contacts.service.ContactsService[modify,ContactsService,createContacts,create,findContactsById,findContactsByAccountId,delete,getAllContacts];contacts.service.ContactsServiceImpl[modify,ContactsServiceImpl,createContacts,create,findContactsById,findContactsByAccountId,delete,getAllContacts];contacts.controller.ContactsControllerTest[testHome,testCreateNewContacts,testModifyContacts,testGetContactsByContactsId,testFindContactsByAccountId,testGetAllContacts,testDeleteContacts,setUp,ContactsControllerTest,testCreateNewContactsAdmin];contacts.service.ContactsServiceImplTest[testCreate2,testCreate1,testGetAllContacts2,testFindContactsByAccountId,testGetAllContacts1,testFindContactsById1,testFindContactsById2,ContactsServiceImplTest,testCreateContacts2,testDelete2,testCreateContacts1,testDelete1,testModify1,setUp,testModify2];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-contacts-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 12347
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 12347
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-delivery-service
spec:
  selector:
    matchLabels:
      app: ts-delivery-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-delivery-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-delivery-service
          image: codewisdom/ts-delivery-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];delivery.config.Queues[emailQueue,Queues];delivery.DeliveryApplication[DeliveryApplication,restTemplate,main];delivery.entity.Delivery[getStoreName,getStationName,setFoodName,getOrderId,setId,getId,getFoodName,Delivery,setOrderId,setStoreName,setStationName];delivery.mq.RabbitReceive[process,RabbitReceive];delivery.repository.DeliveryRepository[findById,findByOrderId,DeliveryRepository,deleteById,deleteFoodOrderByOrderId,findAll];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-delivery-mysql
            - configMapRef:
                name: nacos
            - configMapRef:
                name: rabbitmq
          ports:
            - containerPort: 18808
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 18808
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-execute-service
spec:
  selector:
    matchLabels:
      app: ts-execute-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-execute-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-execute-service
          image: codewisdom/ts-execute-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];execute.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];execute.controller.ExecuteControlller[ExecuteControlller,executeTicket,collectTicket,home];execute.ExecuteApplication[ExecuteApplication,restTemplate,main];execute.serivce.ExecuteService[ticketExecute,ticketCollect,ExecuteService];execute.serivce.ExecuteServiceImpl[ticketExecute,getOrderByIdFromOrderOther,getServiceUrl,executeOrder,ticketCollect,executeOrderOther,getOrderByIdFromOrder,ExecuteServiceImpl];execute.controller.ExecuteControlllerTest[ExecuteControlllerTest,testHome,testExecuteTicket,testCollectTicket,setUp];execute.service.ExecuteServiceImplTest[testTicketExecute2,testTicketExecute1,ExecuteServiceImplTest,setUp,testTicketCollect2,testTicketCollect1];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 12386
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 12386
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-food-delivery-service
spec:
  selector:
    matchLabels:
      app: ts-food-delivery-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-food-delivery-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-food-delivery-service
          image: codewisdom/ts-food-delivery-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];food_delivery.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];food_delivery.controller.FoodDeliveryController[createFoodDeliveryOrder,updateTripId,FoodDeliveryController,updateSeatNo,updateDeliveryTime,getAllFoodDeliveryOrders,deleteFoodDeliveryOrder,getFoodDeliveryOrderById,home,getFoodDeliveryOrderByStoreId];food_delivery.entity.DeliveryInfo[setDeliveryTime,getOrderId,setOrderId,DeliveryInfo,getDeliveryTime];food_delivery.entity.FoodDeliveryOrder[setDeliveryTime,getFoodList,getId,getDeliveryFee,setDeliveryFee,getSeatNo,setStationFoodStoreId,setSeatNo,getDeliveryTime,setFoodList,setTripId,getStationFoodStoreId,getTripId,setId,FoodDeliveryOrder,setCreatedTime,getCreatedTime];food_delivery.entity.SeatInfo[SeatInfo,getOrderId,setOrderId,getSeatNo,setSeatNo];food_delivery.entity.StationFoodStoreInfo[getStationId,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStoreName,getTelephone,setFoodList,StationFoodStoreInfo,setId,getBusinessTime,setStationId,setStoreName];food_delivery.entity.TripOrderInfo[setTripId,getTripId,TripOrderInfo,getOrderId,setOrderId];food_delivery.FoodDeliveryApplication[restTemplate,main,FoodDeliveryApplication];food_delivery.init.InitData[InitData,run];food_delivery.repository.FoodDeliveryOrderRepository[FoodDeliveryOrderRepository,findByStationFoodStoreId,findAll];food_delivery.service.FoodDeliveryService[createFoodDeliveryOrder,updateTripId,updateSeatNo,updateDeliveryTime,getAllFoodDeliveryOrders,deleteFoodDeliveryOrder,FoodDeliveryService,getFoodDeliveryOrderById,getFoodDeliveryOrderByStoreId];food_delivery.service.FoodDeliveryServiceImpl[createFoodDeliveryOrder,updateTripId,getServiceUrl,updateSeatNo,updateDeliveryTime,FoodDeliveryServiceImpl,getAllFoodDeliveryOrders,deleteFoodDeliveryOrder,getFoodDeliveryOrderById,getFoodDeliveryOrderByStoreId];food_delivery.controller.FoodDeliveryControllerTest[testCreateFoodDeliveryOrder,testHome,testGetFoodDeliveryOrderById,testGetFoodDeliveryOrderByStoreId,testDeleteFoodDeliveryOrder,testUpdateTripId,testUpdateDeliveryTime,FoodDeliveryControllerTest,setUp,testGetAllFoodDeliveryOrders,testUpdateSeatNo];food_delivery.service.FoodDeliveryServiceImplTest[FoodDeliveryServiceImplTest,setUp];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-food-delivery-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 18957
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 18957
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-food-service
spec:
  selector:
    matchLabels:
      app: ts-food-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-food-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-food-service
          image: codewisdom/ts-food-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];foodsearch.config.Queues[emailQueue,Queues];foodsearch.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];foodsearch.controller.FoodController[findAllFoodOrder,getAllFood,createFoodBatches,deleteFoodOrder,findFoodOrderByOrderId,FoodController,createFoodOrder,home,test_send_delivery,updateFoodOrder];foodsearch.entity.AllTripFood[getTrainFoodList,getFoodStoreListMap,setTrainFoodList,AllTripFood,setFoodStoreListMap];foodsearch.entity.Delivery[getStoreName,getStationName,setFoodName,getOrderId,getFoodName,Delivery,setOrderId,setStoreName,setStationName];foodsearch.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];foodsearch.FoodApplication[restTemplate,FoodApplication,main];foodsearch.mq.RabbitSend[RabbitSend,send];foodsearch.repository.FoodOrderRepository[FoodOrderRepository,findById,findByOrderId,deleteById,deleteFoodOrderByOrderId,findAll];foodsearch.service.FoodService[createFoodOrdersInBatch,findAllFoodOrder,getAllFood,findByOrderId,deleteFoodOrder,FoodService,createFoodOrder,updateFoodOrder];foodsearch.service.FoodServiceImpl[createFoodOrdersInBatch,findAllFoodOrder,getAllFood,getServiceUrl,FoodServiceImpl,findByOrderId,deleteFoodOrder,createFoodOrder,updateFoodOrder];adminorder.controller.FoodControllerTest[testHome,testUpdateFoodOrder,testGetAllFood,FoodControllerTest,testFindAllFoodOrder,testCreateFoodOrder,setUp,testDeleteFoodOrder,testFindFoodOrderByOrderId];adminorder.service.FoodServiceImplTest[testGetAllFood,testCreateFoodOrder1,testUpdateFoodOrder1,testUpdateFoodOrder2,FoodServiceImplTest,testDeleteFoodOrder2,testDeleteFoodOrder1,testFindAllFoodOrder1,testCreateFoodOrder2,testFindByOrderId2,setUp,testFindByOrderId1,testFindAllFoodOrder2];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
            - configMapRef:
                name: rabbitmq
            - secretRef:
                name: ts-food-mysql
          ports:
            - containerPort: 18856
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 18856
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-gateway-service
spec:
  selector:
    matchLabels:
      app: ts-gateway-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-gateway-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-gateway-service
          image: codewisdom/ts-gateway-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];gateway.GatewayApplication[GatewayApplication,main];gateway.GatewayConfiguration[initGatewayRules,initBlockHandlers,sentinelGatewayFilter,doInit,GatewayConfiguration,sentinelGatewayBlockExceptionHandler];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 18888
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 4000m
              memory: 4000Mi
          readinessProbe:
            tcpSocket:
              port: 18888
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-inside-payment-service
spec:
  selector:
    matchLabels:
      app: ts-inside-payment-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-inside-payment-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-inside-payment-service
          image: codewisdom/ts-inside-payment-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];inside_payment.async.AsyncTask[sendAsyncCallToPaymentService,AsyncTask];inside_payment.async.ExecutorConfig[myAsync,ExecutorConfig,mySimpleAsync];inside_payment.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];inside_payment.controller.InsidePaymentController[InsidePaymentController,payDifference,drawBack,queryAccount,queryAddMoney,pay,addMoney,createAccount,queryPayment,home];inside_payment.entity.AccountInfo[setMoney,getMoney,AccountInfo,getUserId,setUserId];inside_payment.entity.Balance[getBalance,setBalance,Balance,getUserId,setUserId];inside_payment.entity.Money[Money,setMoney,getType,setId,getId,getMoney,setType,getUserId,setUserId];inside_payment.entity.OutsidePaymentInfo[getOrderId,setOrderId,setPrice,OutsidePaymentInfo,getPrice,getUserId,setUserId];inside_payment.entity.Payment[Payment,getType,getOrderId,setId,getId,setOrderId,setPrice,setType,getUserId,getPrice,setUserId];inside_payment.entity.PaymentInfo[PaymentInfo,setTripId,getTripId,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];inside_payment.init.InitData[InitData,run];inside_payment.InsidePaymentApplication[restTemplate,main,InsidePaymentApplication];inside_payment.repository.AddMoneyRepository[AddMoneyRepository,findByUserId,findAll];inside_payment.repository.PaymentRepository[findById,findByOrderId,findByUserId,findAll,PaymentRepository];inside_payment.service.InsidePaymentService[payDifference,InsidePaymentService,drawBack,queryAccount,queryAddMoney,pay,addMoney,createAccount,queryPayment,initPayment];inside_payment.service.InsidePaymentServiceImpl[getServiceUrl,payDifference,drawBack,InsidePaymentServiceImpl,queryAccount,queryAddMoney,pay,addMoney,setOrderStatus,createAccount,queryPayment,initPayment];inside_payment.util.CookieUtil[CookieUtil,readCookieMap,addCookie,getCookieByName];inside_payment.controller.InsidePaymentControllerTest[testPay,testCreateAccount,testHome,testQueryAccount,testPayDifference,testQueryAddMoney,setUp,testAddMoney,testQueryPayment,InsidePaymentControllerTest,testDrawBack];inside_payment.service.InsidePaymentServiceImplTest[testPay,testCreateAccount2,testCreateAccount1,testQueryAddMoney1,testQueryAddMoney2,testQueryPayment2,testQueryAccount,testQueryPayment1,testInitPayment1,testAddMoney1,testAddMoney2,testInitPayment2,testPayDifference,setUp,testDrawBack2,testDrawBack1,InsidePaymentServiceImplTest];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-inside-payment-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 18673
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 18673
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-news-service
spec:
  selector:
    matchLabels:
      app: ts-news-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-news-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-news-service
          image: codewisdom/ts-news-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: 
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 12862
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 12862
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-notification-service
spec:
  selector:
    matchLabels:
      app: ts-notification-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-notification-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-notification-service
          image: codewisdom/ts-notification-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];notification.config.EmailConfig[EmailConfig];notification.config.EmailProperties[EmailProperties,setHost,setPassword,getPassword,getPort,setUsername,setPort,getHost,getUsername];notification.config.Queues[emailQueue,Queues];notification.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];notification.controller.NotificationController[order_create_success,order_cancel_success,test_send_mail,order_changed_success,test_send,NotificationController,home,preserve_success];notification.entity.Mail[getMailFrom,setMailTo,getMailBcc,setAttachments,getMailSubject,getModel,getMailContent,setMailFrom,setMailBcc,setMailCc,setMailContent,getAttachments,setMailSubject,getMailCc,Mail,getMailTo,setModel,getContentType,setContentType];notification.entity.NotifyInfo[getSeatNumber,getId,getOrderNumber,setPrice,setStartPlace,getUsername,setSeatClass,setId,setSendStatus,getDate,setOrderNumber,getStartTime,setStartTime,getStartPlace,setUsername,NotifyInfo,getSeatClass,getPrice,getSendStatus,setEmail,setSeatNumber,getEmail,setDate,setEndPlace,getEndPlace];notification.mq.RabbitReceive[process,RabbitReceive];notification.mq.RabbitSend[RabbitSend,send];notification.NotificationApplication[restTemplate,NotificationApplication,main];notification.repository.NotifyRepository[findById,deleteById,NotifyRepository,findAll];notification.service.MailService[sendEmail,MailService];notification.service.NotificationService[orderChangedSuccess,preserveSuccess,orderCreateSuccess,NotificationService,orderCancelSuccess];notification.service.NotificationServiceImpl[orderChangedSuccess,preserveSuccess,orderCreateSuccess,orderCancelSuccess,NotificationServiceImpl];notification.controller.NotificationControllerTest[testHome,testOrderChangedSuccess,testOrderCreateSuccess,setUp,testPreserveSuccess,testOrderCancelSuccess,NotificationControllerTest];notification.service.NotificationServiceImplTest[testOrderCreateSuccess2,testOrderChangedSuccess2,testOrderCreateSuccess1,testOrderChangedSuccess1,testPreserveSuccess1,testPreserveSuccess2,setUp,NotificationServiceImplTest,testOrderCancelSuccess2,testOrderCancelSuccess1];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-notification-mysql
            - configMapRef:
                name: nacos
            - configMapRef:
                name: rabbitmq
          ports:
            - containerPort: 17853
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 17853
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-order-other-service
spec:
  selector:
    matchLabels:
      app: ts-order-other-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-order-other-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-order-other-service
          image: codewisdom/ts-order-other-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];other.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];other.controller.OrderOtherController[findAllOrder,getOrderById,modifyOrder,OrderOtherController,updateOrder,addcreateNewOrder,calculateSoldTicket,getTicketListByDateAndTripId,home,payOrder,securityInfoCheck,queryOrders,getOrderPrice,queryOrdersForRefresh,createNewOrder,saveOrderInfo,deleteOrder];other.entity.Order[getTravelDate,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];other.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];other.entity.QueryInfo[setTravelDateStart,getEnableTravelDateQuery,setLoginId,getTravelDateEnd,setBoughtDateStart,QueryInfo,enableBoughtDateQuery,setEnableBoughtDateQuery,getEnableStateQuery,getLoginId,getBoughtDateEnd,disableTravelDateQuery,getEnableBoughtDateQuery,setEnableStateQuery,setTravelDateEnd,enableTravelDateQuery,disableStateQuery,getTravelDateStart,setBoughtDateEnd,setEnableTravelDateQuery,disableBoughtDateQuery,getState,enableStateQuery,setState,getBoughtDateStart];other.init.InitData[InitData,run];other.OrderOtherApplication[OrderOtherApplication,restTemplate,main];other.repository.OrderOtherRepository[OrderOtherRepository,findByAccountId,findById,findByTravelDateAndTrainNumber,deleteById,findAll];other.service.OrderOtherService[getSoldTickets,cancelOrder,getOrderById,modifyOrder,queryAlreadySoldOrders,OrderOtherService,updateOrder,addNewOrder,payOrder,getAllOrders,saveChanges,queryOrders,getOrderPrice,queryOrdersForRefresh,create,deleteOrder,findOrderById,alterOrder,checkSecurityAboutOrder,initOrder];other.service.OrderOtherServiceImpl[getSoldTickets,OrderOtherServiceImpl,getServiceUrl,cancelOrder,getOrderById,queryAlreadySoldOrders,modifyOrder,updateOrder,addNewOrder,getAllOrders,payOrder,saveChanges,queryOrders,getOrderPrice,queryOrdersForRefresh,queryForStationId,create,deleteOrder,findOrderById,initOrder,alterOrder,checkSecurityAboutOrder];other.controller.OrderOtherControllerTest[testQueryOrdersForRefresh,testDeleteOrder,testAddCreateNewOrder,testFindAllOrder,testPayOrder,testModifyOrder,testGetOrderPrice,testQueryOrders,testGetTicketListByDateAndTripId,testHome,testCalculateSoldTicket,testUpdateOrder,OrderOtherControllerTest,testSecurityInfoCheck,testCreateNewOrder,testSaveOrderInfo,setUp,testGetOrderById];other.service.OrderOtherServiceImplTest[testQueryOrdersForRefresh,OrderOtherServiceImplTest,testGetOrderById1,testGetOrderById2,testUpdateOrder1,testQueryOrders,testUpdateOrder2,testFindOrderById1,testFindOrderById2,testAlterOrder2,testQueryAlreadySoldOrders,testDeleteOrder2,testQueryForStationId,testDeleteOrder1,testGetSoldTickets2,testGetOrderPrice1,testGetSoldTickets1,testGetOrderPrice2,setUp,testAlterOrder1,testSaveChanges2,testCancelOrder2,testSaveChanges1,testModifyOrder2,testCreate2,testGetAllOrders1,testCreate1,testInitOrder2,testInitOrder1,testAddNewOrder2,testAddNewOrder1,testCheckSecurityAboutOrder,testPayOrder2,testPayOrder1,testGetAllOrders2,testModifyOrder1,testCancelOrder1];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-order-other-mysql
            - configMapRef:
                name: nacos
            - configMapRef:
                name: rabbitmq
          ports:
            - containerPort: 12032
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 12032
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-order-service
spec:
  selector:
    matchLabels:
      app: ts-order-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-order-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-order-service
          image: codewisdom/ts-order-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];order.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];order.controller.OrderController[findAllOrder,getOrderById,modifyOrder,updateOrder,addcreateNewOrder,OrderController,calculateSoldTicket,getTicketListByDateAndTripId,home,payOrder,securityInfoCheck,queryOrders,getOrderPrice,queryOrdersForRefresh,createNewOrder,saveOrderInfo,deleteOrder];order.entity.Order[getTravelDate,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];order.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];order.entity.OrderInfo[setTravelDateStart,getEnableTravelDateQuery,setLoginId,getTravelDateEnd,setBoughtDateStart,enableBoughtDateQuery,setEnableBoughtDateQuery,isEnableTravelDateQuery,getEnableStateQuery,getLoginId,getBoughtDateEnd,disableTravelDateQuery,getEnableBoughtDateQuery,setEnableStateQuery,setTravelDateEnd,enableTravelDateQuery,disableStateQuery,getTravelDateStart,isEnableBoughtDateQuery,OrderInfo,setBoughtDateEnd,setEnableTravelDateQuery,disableBoughtDateQuery,getState,isEnableStateQuery,enableStateQuery,setState,getBoughtDateStart];order.init.InitData[InitData,run];order.OrderApplication[OrderApplication,restTemplate,main];order.repository.OrderRepository[findByAccountId,OrderRepository,findById,findByTravelDateAndTrainNumber,deleteById,findAll];order.service.OrderService[getSoldTickets,cancelOrder,getOrderById,queryAlreadySoldOrders,modifyOrder,updateOrder,addNewOrder,getAllOrders,payOrder,saveChanges,queryOrders,getOrderPrice,queryOrdersForRefresh,create,OrderService,deleteOrder,findOrderById,alterOrder,checkSecurityAboutOrder,initOrder];order.service.OrderServiceImpl[getSoldTickets,getServiceUrl,cancelOrder,getOrderById,queryAlreadySoldOrders,modifyOrder,updateOrder,addNewOrder,getAllOrders,payOrder,saveChanges,queryOrders,getOrderPrice,queryOrdersForRefresh,queryForStationId,create,OrderServiceImpl,deleteOrder,findOrderById,alterOrder,initOrder,checkSecurityAboutOrder];order.controller.OrderControllerTest[testQueryOrdersForRefresh,testDeleteOrder,testAddCreateNewOrder,testFindAllOrder,testPayOrder,testModifyOrder,testGetOrderPrice,testQueryOrders,testGetTicketListByDateAndTripId,testHome,testCalculateSoldTicket,testUpdateOrder,testSecurityInfoCheck,testCreateNewOrder,testSaveOrderInfo,setUp,OrderControllerTest,testGetOrderById];order.service.OrderServiceImplTest[testQueryOrdersForRefresh,testGetOrderById1,testGetOrderById2,testUpdateOrder1,testQueryOrders,testUpdateOrder2,testFindOrderById1,testFindOrderById2,testAlterOrder2,testQueryAlreadySoldOrders,testDeleteOrder2,testQueryForStationId,testDeleteOrder1,testGetSoldTickets2,testGetOrderPrice1,testGetSoldTickets1,testGetOrderPrice2,OrderServiceImplTest,setUp,testAlterOrder1,testSaveChanges2,testCancelOrder2,testSaveChanges1,testModifyOrder2,testCreate2,testGetAllOrders1,testCreate1,testInitOrder2,testInitOrder1,testAddNewOrder2,testAddNewOrder1,testCheckSecurityAboutOrder,testPayOrder2,testPayOrder1,testGetAllOrders2,testModifyOrder1,testCancelOrder1];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-order-mysql
            - configMapRef:
                name: nacos
            - configMapRef:
                name: rabbitmq
          ports:
            - containerPort: 12031
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 12031
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-payment-service
spec:
  selector:
    matchLabels:
      app: ts-payment-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-payment-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-payment-service
          image: codewisdom/ts-payment-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];com.trainticket.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];com.trainticket.controller.PaymentController[PaymentController,query,pay,addMoney,home];com.trainticket.entity.Money[Money,setMoney,setId,getId,getMoney,getUserId,setUserId];com.trainticket.entity.Payment[Payment,getOrderId,setId,getId,setOrderId,setPrice,getUserId,getPrice,setUserId];com.trainticket.init.InitData[InitData,run];com.trainticket.PaymentApplication[PaymentApplication,restTemplate,main];com.trainticket.repository.AddMoneyRepository[AddMoneyRepository];com.trainticket.repository.PaymentRepository[findById,findByOrderId,findByUserId,findAll,PaymentRepository];com.trainticket.service.PaymentService[query,pay,addMoney,initPayment,PaymentService];com.trainticket.service.PaymentServiceImpl[query,pay,addMoney,initPayment,PaymentServiceImpl];com.trainticket.controller.PaymentControllerTest[testPay,testHome,testQuery,PaymentControllerTest,setUp,testAddMoney];com.trainticket.service.PaymentServiceImplTest[testInitPayment1,testQuery1,testInitPayment2,PaymentServiceImplTest,testQuery2,testPay1,setUp,testAddMoney,testPay2];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-payment-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 19001
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 19001
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-preserve-other-service
spec:
  selector:
    matchLabels:
      app: ts-preserve-other-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-preserve-other-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-preserve-other-service
          image: codewisdom/ts-preserve-other-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];preserveOther.config.Queues[emailQueue,Queues];preserveOther.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];preserveOther.controller.PreserveOtherController[preserve,PreserveOtherController,home];preserveOther.mq.RabbitSend[RabbitSend,send];preserveOther.PreserveOtherApplication[PreserveOtherApplication,restTemplate,main];preserveOther.service.PreserveOtherService[PreserveOtherService,preserve];preserveOther.service.PreserveOtherServiceImpl[createOrder,getServiceUrl,PreserveOtherServiceImpl,getTripAllDetailInformation,preserve,createFoodOrder,sendEmail,addAssuranceForOrder,dipatchSeat,queryForStationId,getAccount,checkSecurity,getContactsById,createConsign];preserveOther.controller.PreserveOtherControllerTest[PreserveOtherControllerTest,testHome,testPreserve,setUp];preserveOther.service.PreserveOtherServiceImplTest[testSendEmail,PreserveOtherServiceImplTest,testPreserve,testGetAccount,setUp,testDipatchSeat];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
            - configMapRef:
                name: rabbitmq
          ports:
            - containerPort: 14569
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 14569
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-preserve-service
spec:
  selector:
    matchLabels:
      app: ts-preserve-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-preserve-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-preserve-service
          image: codewisdom/ts-preserve-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];preserve.config.Queues[emailQueue,Queues];preserve.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];preserve.controller.PreserveController[PreserveController,preserve,home];preserve.mq.RabbitSend[RabbitSend,send];preserve.PreserveApplication[restTemplate,PreserveApplication,main];preserve.service.PreserveService[PreserveService,preserve];preserve.service.PreserveServiceImpl[createOrder,getServiceUrl,getTripAllDetailInformation,preserve,PreserveServiceImpl,createFoodOrder,sendEmail,addAssuranceForOrder,dipatchSeat,queryForStationId,getAccount,checkSecurity,getContactsById,createConsign];preserve.controller.PreserveControllerTest[testHome,testPreserve,setUp,PreserveControllerTest];preserve.service.PreserveServiceImplTest[PreserveServiceImplTest,testSendEmail,testPreserve,testGetAccount,setUp,testDipatchSeat];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
            - configMapRef:
                name: rabbitmq
          ports:
            - containerPort: 14568
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 14568
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-price-service
spec:
  selector:
    matchLabels:
      app: ts-price-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-price-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-price-service
          image: codewisdom/ts-price-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];price.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];price.controller.PriceController[PriceController,query,create,update,queryAll,delete,home];price.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];price.init.InitData[InitData,run];price.PriceApplication[restTemplate,PriceApplication,main];price.repository.PriceConfigRepository[findById,findByRouteIdsAndTrainTypes,findByRouteIdAndTrainType,findAll,PriceConfigRepository];price.service.PriceService[findAllPriceConfig,updatePriceConfig,findById,PriceService,createNewPriceConfig,deletePriceConfig,findByRouteIdsAndTrainTypes,findByRouteIdAndTrainType];price.service.PriceServiceImpl[findAllPriceConfig,updatePriceConfig,findById,createNewPriceConfig,deletePriceConfig,PriceServiceImpl,findByRouteIdsAndTrainTypes,findByRouteIdAndTrainType];price.controller.PriceControllerTest[testHome,testDelete,testQueryAll,PriceControllerTest,testQuery,testCreate,setUp,testUpdate];price.service.PriceServiceImplTest[testCreateNewPriceConfig2,testCreateNewPriceConfig1,testFindById,PriceServiceImplTest,testFindAllPriceConfig2,testFindAllPriceConfig1,testUpdatePriceConfig2,setUp,testDeletePriceConfig1,testFindByRouteIdAndTrainType1,testFindByRouteIdAndTrainType2,testUpdatePriceConfig1,testDeletePriceConfig2];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-price-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 16579
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 16579
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-rebook-service
spec:
  selector:
    matchLabels:
      app: ts-rebook-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-rebook-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-rebook-service
          image: codewisdom/ts-rebook-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];rebook.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];rebook.controller.RebookController[payDifference,RebookController,rebook,home];rebook.entity.RebookInfo[setLoginId,getOldTripId,getOrderId,setOrderId,setOldTripId,getSeatType,setTripId,RebookInfo,getTripId,setDate,getLoginId,getDate,setSeatType];rebook.RebookApplication[restTemplate,RebookApplication,main];rebook.service.RebookService[RebookService,payDifference,rebook];rebook.service.RebookServiceImpl[createOrder,getServiceUrl,getRouteByRouteId,getTripAllDetailInformation,tripGD,queryTrainTypeByName,drawBackMoney,updateOrder,dipatchSeat,payDifference,checkTime,rebook,RebookServiceImpl,getOrderByRebookInfo,payDifferentMoney,deleteOrder,getAuthorizationHeadersFrom];rebook.controller.RebookControllerTest[testHome,testRebook,testPayDifference,RebookControllerTest,setUp];rebook.service.RebookServiceImplTest[RebookServiceImplTest,testRebook,testPayDifference,setUp,testDipatchSeat];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
            - configMapRef:
                name: rabbitmq
          ports:
            - containerPort: 18886
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 18886
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-route-plan-service
spec:
  selector:
    matchLabels:
      app: ts-route-plan-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-route-plan-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-route-plan-service
          image: codewisdom/ts-route-plan-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];plan.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];plan.controller.RoutePlanController[getQuickestRoutes,RoutePlanController,getCheapestRoutes,getMinStopStations,home];plan.RoutePlanApplication[restTemplate,main,RoutePlanApplication];plan.service.RoutePlanService[searchQuickestResult,searchMinStopStations,searchCheapestResult,RoutePlanService];plan.service.RoutePlanServiceImpl[searchQuickestResult,getServiceUrl,getRouteByRouteId,getTripFromHighSpeedTravelServive,getStationList,searchMinStopStations,searchCheapestResult,getTripFromNormalTrainTravelService,RoutePlanServiceImpl];plan.controller.RoutePlanControllerTest[testHome,testGetCheapestRoutes,setUp,RoutePlanControllerTest,testGetQuickestRoutes,testGetMinStopStations];plan.service.RoutePlanServiceImplTest[RoutePlanServiceImplTest,testSearchMinStopStations,setUp,testSearchQuickestResult,testSearchCheapestResult];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 14578
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 14578
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-route-service
spec:
  selector:
    matchLabels:
      app: ts-route-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-route-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-route-service
          image: codewisdom/ts-route-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];route.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];route.controller.RouteController[queryByStartAndTerminal,createAndModifyRoute,deleteRoute,queryByIds,RouteController,queryAll,home,queryById];route.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];route.entity.RouteInfo[setStartStation,setStationList,getStartStation,getEndStation,setDistanceList,getStationList,setId,getId,setEndStation,RouteInfo,getDistanceList];route.init.InitData[InitData,run];route.repository.RouteRepository[findByIds,findByStartStationAndEndStation,RouteRepository,removeRouteById,findById,findAll];route.RouteApplication[restTemplate,main,RouteApplication];route.service.RouteService[getRouteById,getRouteByStartAndEnd,deleteRoute,RouteService,getAllRoutes,getRouteByIds,createAndModify];route.service.RouteServiceImpl[getRouteById,deleteRoute,getRouteByStartAndEnd,RouteServiceImpl,getAllRoutes,createAndModify,getRouteByIds];route.controller.RouteControllerTest[testQueryByStartAndTerminal,testHome,testQueryAll,testDeleteRoute,testQueryById,setUp,testCreateAndModifyRoute,RouteControllerTest];route.service.RouteServiceImplTest[testCreateAndModify2,testCreateAndModify1,testDeleteRoute2,testDeleteRoute1,testGetRouteByStartAndTerminal2,testGetRouteByStartAndTerminal1,RouteServiceImplTest,setUp,testGetAllRoutes1,testGetAllRoutes2,testGetRouteById2,testCreateAndModify3,testGetRouteById1];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-route-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 11178
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 11178
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-seat-service
spec:
  selector:
    matchLabels:
      app: ts-seat-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-seat-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-seat-service
          image: codewisdom/ts-seat-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];seat.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];seat.controller.SeatController[getLeftTicketOfInterval,create,SeatController,home];seat.SeatApplication[restTemplate,main,SeatApplication];seat.service.SeatService[SeatService,getLeftTicketOfInterval,distributeSeat];seat.service.SeatServiceImpl[getServiceUrl,getLeftTicketOfInterval,getDirectProportion,isContained,SeatServiceImpl,distributeSeat];seat.controller.SeatControllerTest[testHome,testCreate,testGetLeftTicketOfInterval,SeatControllerTest,setUp];seat.service.SeatServiceImplTest[testGetLeftTicketOfInterval,setUp,SeatServiceImplTest,testDistributeSeat1,testGetLeftTicketOfInterva2,testDistributeSeat2];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 18898
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 18898
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-security-service
spec:
  selector:
    matchLabels:
      app: ts-security-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-security-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-security-service
          image: codewisdom/ts-security-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];security.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];security.controller.SecurityController[findAllSecurityConfig,SecurityController,create,update,check,delete,home];security.entity.SecurityConfig[setName,getValue,getName,SecurityConfig,setValue,setId,getId,setDescription,getDescription];security.init.InitData[InitData,run];security.repository.SecurityRepository[findById,SecurityRepository,deleteById,findByName,findAll];security.SecurityApplication[restTemplate,SecurityApplication,main];security.service.SecurityService[addNewSecurityConfig,findAllSecurityConfig,SecurityService,modifySecurityConfig,check,deleteSecurityConfig];security.service.SecurityServiceImpl[addNewSecurityConfig,getServiceUrl,findAllSecurityConfig,getSecurityOrderInfoFromOrder,modifySecurityConfig,SecurityServiceImpl,check,getSecurityOrderOtherInfoFromOrder,deleteSecurityConfig];security.controller.SecurityControllerTest[testHome,testDelete,testFindAllSecurityConfig,testCreate,setUp,SecurityControllerTest,testUpdate,testCheck];security.service.SecurityServiceImplTest[testFindAllSecurityConfig1,testModifySecurityConfig1,testDeleteSecurityConfig2,testFindAllSecurityConfig2,testDeleteSecurityConfig1,testModifySecurityConfig2,setUp,SecurityServiceImplTest,testAddNewSecurityConfig2,testAddNewSecurityConfig1,testCheck];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-security-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 11188
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 11188
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-station-food-service
spec:
  selector:
    matchLabels:
      app: ts-station-food-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-station-food-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-station-food-service
          image: codewisdom/ts-station-food-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];food.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];food.controller.StationFoodController[getFoodStoresOfStation,getFoodStoresByStationNames,getFoodListByStationFoodStoreId,StationFoodController,getAllFoodStores,home];food.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];food.init.InitData[InitData,run,toFoodList];food.repository.StationFoodRepository[findByStationNameIn,findByStationName,findById,deleteById,findAll,StationFoodRepository];food.service.StationFoodService[getFoodStoresByStationNames,StationFoodService,createFoodStore,listFoodStores,getStaionFoodStoreById,listFoodStoresByStationName];food.service.StationFoodServiceImpl[getFoodStoresByStationNames,createFoodStore,listFoodStores,getStaionFoodStoreById,listFoodStoresByStationName,StationFoodServiceImpl];food.StationFoodApplication[restTemplate,StationFoodApplication,main];food.controller.StationFoodControllerTest[testHome,StationFoodControllerTest,setUp,testGetFoodStoresByStationNames,testGetAllFoodStores,testGetFoodStoresOfStation];food.service.StationFoodServiceImplTest[testCreateFoodStore1,testCreateFoodStore2,StationFoodServiceImplTest,testListFoodStoresByStationName1,testListFoodStoresByStationName2,testGetFoodStoresByStationNames1,setUp,testListFoodStores2,testGetFoodStoresByStationNames2,testListFoodStores1];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-station-food-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 18855
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 18855
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-station-service
spec:
  selector:
    matchLabels:
      app: ts-station-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-station-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-station-service
          image: codewisdom/ts-station-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];fdse.microservice.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];fdse.microservice.controller.StationController[queryForIdBatch,queryForStationId,StationController,query,create,update,queryForNameBatch,delete,home,queryById];fdse.microservice.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];fdse.microservice.init.InitData[InitData,run];fdse.microservice.repository.StationRepository[findByNames,findById,findByName,findAll,StationRepository];fdse.microservice.service.StationService[StationService,exist,queryForIdBatch,query,create,update,queryByIdBatch,queryForId,delete,queryById];fdse.microservice.service.StationServiceImpl[exist,queryForIdBatch,StationServiceImpl,query,create,update,queryByIdBatch,queryForId,delete,queryById];fdse.microservice.StationApplication[restTemplate,main,StationApplication];fdse.microservice.controller.StationControllerTest[StationControllerTest,testHome,testDelete,testQueryForStationId,testQuery,testCreate,testQueryForIdBatch,testQueryById,setUp,testQueryForNameBatch,testUpdate];fdse.microservice.service.StationServiceImplTest[testQuery1,testCreate2,testCreate1,testQuery2,testExist2,testExist1,testQueryByIdBatch1,testQueryByIdBatch2,testQueryForId1,testQueryForId2,testUpdate1,testDelete2,StationServiceImplTest,testUpdate2,testDelete1,setUp,testQueryForIdBatch2,testQueryById1,testQueryById2,testQueryForIdBatch1];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-station-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 12345
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 12345
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-ticket-office-service
spec:
  selector:
    matchLabels:
      app: ts-ticket-office-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-ticket-office-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-ticket-office-service
          image: codewisdom/ts-ticket-office-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: 
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-ticket-office-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 16108
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 16108
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-train-food-service
spec:
  selector:
    matchLabels:
      app: ts-train-food-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-train-food-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-train-food-service
          image: codewisdom/ts-train-food-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];trainFood.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];trainFood.controller.TrainFoodController[getTrainFoodOfTrip,getAllTrainFood,TrainFoodController,home];trainFood.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];trainFood.init.InitData[InitData,run,toFoodList];trainFood.repository.TrainFoodRepository[TrainFoodRepository,findById,deleteById,findAll,findByTripId];trainFood.service.TrainFoodService[TrainFoodService,listTrainFood,createTrainFood,listTrainFoodByTripId];trainFood.service.TrainFoodServiceImpl[listTrainFood,TrainFoodServiceImpl,createTrainFood,listTrainFoodByTripId];trainFood.TrainFoodApplication[restTemplate,main,TrainFoodApplication];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-train-food-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 19999
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 19999
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-train-service
spec:
  selector:
    matchLabels:
      app: ts-train-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-train-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-train-service
          image: codewisdom/ts-train-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];train.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];train.controller.TrainController[retrieveByName,query,create,retrieve,update,TrainController,delete,home];train.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];train.init.InitData[InitData,run];train.repository.TrainTypeRepository[findByNames,findById,deleteById,findByName,TrainTypeRepository,findAll];train.service.TrainService[retrieveByNames,retrieveByName,query,TrainService,create,retrieve,update,delete];train.service.TrainServiceImpl[retrieveByNames,retrieveByName,query,create,retrieve,update,delete,TrainServiceImpl];train.TrainApplication[TrainApplication,restTemplate,main];train.controller.TrainControllerTest[testQuery1,testCreate2,testCreate1,testQuery2,TrainControllerTest,testRetrieve2,testRetrieve1,testHome,testUpdate1,testDelete2,testUpdate2,testDelete1,setUp];train.service.TrainServiceImplTest[testCreate2,testCreate1,testQuery,testUpdate1,testDelete2,testUpdate2,testDelete1,setUp,testRetrieve2,TrainServiceImplTest,testRetrieve1];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-train-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 14567
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 14567
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-travel-plan-service
spec:
  selector:
    matchLabels:
      app: ts-travel-plan-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-travel-plan-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-travel-plan-service
          image: codewisdom/ts-travel-plan-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];travelplan.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];travelplan.controller.TravelPlanController[getByMinStation,getByCheapest,getByQuickest,getTransferResult,TravelPlanController,home];travelplan.entity.TransferTravelInfo[getTravelDate,setStartStation,getStartStation,getEndStation,TransferTravelInfo,setTravelDate,setTrainType,getTrainType,setEndStation,getViaStation,setViaStation];travelplan.entity.TransferTravelResult[setFirstSectionResult,getFirstSectionResult,TransferTravelResult,getSecondSectionResult,setSecondSectionResult];travelplan.entity.TravelAdvanceResultUnit[setNumberOfRestTicketFirstClass,setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setNumberOfRestTicketSecondClass,setPriceForFirstClassSeat,getPriceForSecondClassSeat,setTrainTypeId,getNumberOfRestTicketSecondClass,TravelAdvanceResultUnit,getStopStations,getTrainTypeId,setStartStation,getEndTime,getStartStation,getEndStation,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime,getNumberOfRestTicketFirstClass];travelplan.service.TravelPlanService[TravelPlanService,getQuickest,getMinStation,getCheapest,getTransferSearch];travelplan.service.TravelPlanServiceImpl[getRestTicketNumber,tripsFromHighSpeed,getServiceUrl,getRoutePlanResultMinStation,getQuickest,getMinStation,queryTrainTypeByName,getTransferSearch,getRoutePlanResultCheapest,getCheapest,tripsFromNormal,TravelPlanServiceImpl,getRoutePlanResultQuickest];travelplan.TravelPlanApplication[restTemplate,TravelPlanApplication,main];travelplan.controller.TravelPlanControllerTest[testHome,testGetByQuickest,testGetByCheapest,TravelPlanControllerTest,setUp,testGetByMinStation,testGetTransferResult];travelplan.service.TravelPlanServiceImplTest[TravelPlanServiceImplTest,testGetTransferSearch,testGetQuickest,testGetCheapest,testGetMinStation,setUp];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 14322
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 14322
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-travel-service
spec:
  selector:
    matchLabels:
      app: ts-travel-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-travel-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-travel-service
          image: codewisdom/ts-travel-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];travel.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];travel.controller.TravelController[getTripAllDetailInfo,adminQueryAll,queryAll,getTripsByRouteId,home,getRouteByTripId,updateTrip,TravelController,queryInfoInparallel,retrieve,createTrip,deleteTrip,queryInfo,getTrainTypeByTripId];travel.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];travel.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];travel.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];travel.entity.TripAllDetail[getTripResponse,setTrip,TripAllDetail,setTripResponse,getTrip];travel.init.InitData[InitData,run];travel.repository.TripRepository[deleteByTripId,TripRepository,findByTripId,findAll,findByRouteId];travel.service.TravelService[query,getTripAllDetailInfo,update,adminQueryAll,queryAll,TravelService,delete,queryByBatch,getRouteByTripId,queryInParallel,create,retrieve,getTripByRoute,getTrainTypeByTripId];travel.service.TravelServiceImpl[getRestTicketNumber,getServiceUrl,getTickets,getRouteByRouteId,query,getTripAllDetailInfo,update,adminQueryAll,setResponse,queryAll,delete,queryByBatch,getRouteByTripId,afterToday,getTicketsByBatch,queryInParallel,create,getTripByRoute,retrieve,TravelServiceImpl,getTrainTypeByTripId,getTrainTypeByName];travel.service.MyCallable[call,MyCallable];travel.TravelApplication[restTemplate,TravelApplication,main];travel.controller.TravelControllerTest[testQueryAll,testAdminQueryAll,testGetTripAllDetailInfo,TravelControllerTest,testUpdateTrip,testGetTripsByRouteId,testHome,testGetRouteByTripId,testRetrieve,setUp,testGetTrainTypeByTripId,testDeleteTrip,testQueryInfo2,testCreateTrip,testQueryInfo1];travel.service.TravelServiceImplTest[testCreate2,testCreate1,testGetTripAllDetailInfo,TravelServiceImplTest,testQueryAll2,testRetrieve2,testQueryAll1,testRetrieve1,testQuery,testUpdate1,testDelete2,testUpdate2,testDelete1,setUp,testAdminQueryAll2,testGetRouteByTripId2,testGetTrainTypeByTripId,testGetTripByRoute2,testGetTripByRoute1,testAdminQueryAll1,testGetRouteByTripId1];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-travel-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 12346
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 12346
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-travel2-service
spec:
  selector:
    matchLabels:
      app: ts-travel2-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-travel2-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-travel2-service
          image: codewisdom/ts-travel2-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];travel2.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];travel2.controller.Travel2Controller[getTripAllDetailInfo,adminQueryAll,queryAll,getTripsByRouteId,home,getRouteByTripId,updateTrip,retrieve,Travel2Controller,createTrip,deleteTrip,queryInfo,getTrainTypeByTripId];travel2.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];travel2.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];travel2.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];travel2.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];travel2.init.InitData[InitData,run];travel2.repository.TripRepository[deleteByTripId,TripRepository,findByTripId,findAll,findByRouteId];travel2.service.TravelService[query,getTripAllDetailInfo,update,adminQueryAll,queryAll,TravelService,delete,queryByBatch,getRouteByTripId,create,retrieve,getTripByRoute,getTrainTypeByTripId];travel2.service.TravelServiceImpl[getRestTicketNumber,getServiceUrl,getTickets,getRouteByRouteId,query,getTripAllDetailInfo,update,adminQueryAll,setResponse,queryAll,delete,queryByBatch,getRouteByTripId,afterToday,getTicketsByBatch,getTripByRoute,create,retrieve,TravelServiceImpl,getTrainTypeByTripId,getTrainTypeByName];travel2.Travel2Application[restTemplate,Travel2Application,main];travel2.controller.TravelControllerTest[testQueryAll,testAdminQueryAll,testGetTripAllDetailInfo,TravelControllerTest,testUpdateTrip,testGetTripsByRouteId,testHome,testGetRouteByTripId,testRetrieve,setUp,testGetTrainTypeByTripId,testDeleteTrip,testQueryInfo2,testCreateTrip,testQueryInfo1];travel2.service.TravelServiceImplTest[testCreate2,testCreate1,testGetTripAllDetailInfo,TravelServiceImplTest,testQueryAll2,testRetrieve2,testQueryAll1,testRetrieve1,testQuery,testUpdate1,testDelete2,testUpdate2,testDelete1,setUp,testAdminQueryAll2,testGetRouteByTripId2,testGetTrainTypeByTripId,testGetTripByRoute2,testGetTripByRoute1,testAdminQueryAll1,testGetRouteByTripId1];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-travel2-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 16346
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 16346
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-user-service
spec:
  selector:
    matchLabels:
      app: ts-user-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-user-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-user-service
          image: codewisdom/ts-user-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];user.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];user.controller.UserController[getUserByUserName,registerUser,getAllUser,updateUser,UserController,getUserByUserId,testHello,deleteUserById];user.dto.AuthDto[setPassword,getPassword,setUserName,AuthDto,getUserName,getUserId,setUserId];user.dto.UserDto[setPassword,UserDto,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];user.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];user.init.InitUser[InitUser,run];user.repository.UserRepository[UserRepository,findByUserName,findByUserId,findAll,deleteByUserId];user.service.impl.UserServiceImpl[getAllUsers,getServiceUrl,findByUserName,UserServiceImpl,findByUserId,deleteUser,updateUser,deleteUserAuth,saveUser,createDefaultAuthUser];user.service.UserService[getAllUsers,UserService,findByUserName,findByUserId,deleteUser,updateUser,saveUser];user.UserApplication[UserApplication,restTemplate,main];user.controller.UserControllerTest[testHome,testGetUserByUserName,testGetUserByUserId,UserControllerTest,testGetAllUser,testUpdateUser,setUp,testDeleteUserById,testRegisterUser];user.service.UserServiceImplTest[UserServiceImplTest,testDeleteUserAuth,testGetAllUsers1,testGetAllUsers2,testFindByUserId1,testFindByUserId2,testFindByUserName1,testDeleteUser2,testFindByUserName2,testDeleteUser1,testSaveUser,setUp,testUpdateUser2,testUpdateUser1];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-user-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 12342
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 12342
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-verification-code-service
spec:
  selector:
    matchLabels:
      app: ts-verification-code-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-verification-code-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-verification-code-service
          image: codewisdom/ts-verification-code-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];verifycode.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];verifycode.controller.VerifyCodeController[verifyCode,VerifyCodeController,imageCode];verifycode.service.impl.VerifyCodeServiceImpl[verifyCode,getRandColor,getImageCode,VerifyCodeServiceImpl];verifycode.service.VerifyCodeService[verifyCode,VerifyCodeService,getImageCode];verifycode.util.CookieUtil[CookieUtil,readCookieMap,addCookie,getCookieByName];verifycode.VerifyCodeApplication[VerifyCodeApplication,restTemplate,main];verifycode.controller.VerifyCodeControllerTest[setUp,VerifyCodeControllerTest,testImageCode,testVerifyCode];verifycode.service.VerifyCodeServiceImplTest[testGetImageCode,VerifyCodeServiceImplTest,testVerifyCode];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 15678
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 15678
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-voucher-service
spec:
  selector:
    matchLabels:
      app: ts-voucher-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-voucher-service
    spec:
      containers:
        - name: ts-voucher-service
          image: codewisdom/ts-voucher-service:1.0.1
          imagePullPolicy: IfNotPresent
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
          envFrom:
            - secretRef:
                name: ts-voucher-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 16101
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 16101
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-wait-order-service
spec:
  selector:
    matchLabels:
      app: ts-wait-order-service
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-wait-order-service
    spec:
      volumes:
        - name: otel-agent
          emptyDir: {}
      initContainers:
        - name: agent-container
          image: alpine
          volumeMounts:
            - name: otel-agent
              mountPath: /agent
          command: [ "/bin/sh" ]
          args: [ "-c", "cd /agent && wget https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.30.0/opentelemetry-javaagent.jar" ]
      containers:
        - name: ts-wait-order-service
          image: codewisdom/ts-wait-order-service:1.0.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: otel-agent
              mountPath: /otel
          env:
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "edu.fudan.common.config.SwaggerConfig[SwaggerConfig,createRestApi,apiInfo];edu.fudan.common.entity.Account[setName,Account,setPassword,getName,setLoginId,setDocumentNum,getDocumentType,getId,getGender,setGender,getPassword,setEmail,getAccountId,getEmail,setId,getLoginId,setDocumentType,getDocumentNum,setAccountId];edu.fudan.common.entity.AdminTrip[setRoute,setTrip,setTrainType,getTrainType,AdminTrip,getRoute,getTrip];edu.fudan.common.entity.Assurance[Assurance,getType,getOrderId,setId,getId,setOrderId,setType];edu.fudan.common.entity.Config[setName,getValue,getName,Config,setValue,setDescription,getDescription];edu.fudan.common.entity.Consign[getConsignee,getPhone,setConsignee,getWeight,setFrom,setWeight,getOrderId,getId,getTo,setPhone,setOrderId,setHandleDate,getTargetDate,Consign,getAccountId,setId,setTo,setIsWithin,getHandleDate,setAccountId,getIsWithin,getFrom,setTargetDate];edu.fudan.common.entity.Contacts[setName,getName,getDocumentNumber,getDocumentType,getId,Contacts,getAccountId,setPhoneNumber,hashCode,setDocumentNumber,equals,setId,getPhoneNumber,setDocumentType,setAccountId];edu.fudan.common.entity.Food[setFoodName,getFoodName,setPrice,getPrice,Food];edu.fudan.common.entity.FoodOrder[setFoodName,getOrderId,getId,getFoodName,setFoodType,setOrderId,setPrice,getPrice,FoodOrder,getStationName,getStoreName,getFoodType,setId,setStationName,setStoreName];edu.fudan.common.entity.LeftTicketInfo[setSoldTickets,getSoldTickets,LeftTicketInfo,toString];edu.fudan.common.entity.NotifyInfo[getSeatNumber,setUsername,NotifyInfo,getOrderNumber,setPrice,getSeatClass,getPrice,setStartPlace,getUsername,setEmail,setSeatNumber,setSeatClass,getEmail,setDate,getDate,setOrderNumber,getStartTime,setEndPlace,setStartTime,getStartPlace,getEndPlace];edu.fudan.common.entity.Order[getTravelDate,getDifferenceMoney,setTravelTime,getSeatNumber,getDocumentType,getId,getStatus,setCoachNumber,setPrice,setBoughtDate,getContactsName,hashCode,setSeatClass,getTravelTime,setId,getTrainNumber,setDocumentType,getFrom,Order,setDifferenceMoney,setFrom,setTravelDate,getCoachNumber,getTo,setTrainNumber,getContactsDocumentNumber,getSeatClass,getPrice,setStatus,setContactsName,getAccountId,setSeatNumber,equals,setTo,setContactsDocumentNumber,setAccountId,getBoughtDate];edu.fudan.common.entity.OrderAlterInfo[OrderAlterInfo,getAccountId,setPreviousOrderId,getNewOrderInfo,setNewOrderInfo,getPreviousOrderId,setAccountId,getLoginToken,setLoginToken];edu.fudan.common.entity.OrderSecurity[setOrderNumInLastOneHour,getOrderNumInLastOneHour,OrderSecurity,getOrderNumOfValidOrder,setOrderNumOfValidOrder];edu.fudan.common.entity.OrderTicketsInfo[OrderTicketsInfo,getFoodName,setFoodType,setLoginToken,setConsigneeWeight,getStoreName,getContactsId,setTripId,getFoodType,getTripId,setConsigneeName,getDate,getHandleDate,setStationName,setStoreName,getFrom,getConsigneeWeight,setFoodName,setFrom,getTo,getConsigneePhone,setContactsId,setHandleDate,getConsigneeName,getSeatType,getStationName,getAccountId,setAssurance,setFoodPrice,setConsigneePhone,setDate,setTo,setIsWithin,getFoodPrice,setAccountId,getAssurance,getLoginToken,getIsWithin,setSeatType];edu.fudan.common.entity.PaymentDifferenceInfo[setTripId,getTripId,PaymentDifferenceInfo,getOrderId,setOrderId,setPrice,getUserId,getPrice,setUserId];edu.fudan.common.entity.PriceConfig[PriceConfig,setFirstClassPriceRate,getFirstClassPriceRate,getBasicPriceRate,setBasicPriceRate,setRouteId,setTrainType,getTrainType,setId,getId,getRouteId];edu.fudan.common.entity.Route[setStartStation,getStartStation,getEndStation,getDistances,setStations,setId,getId,getStations,setEndStation,setDistances,Route];edu.fudan.common.entity.RouteInfo[setLoginId,getDistances,setDistanceList,getStationList,getId,getDistanceList,setStartStation,setStationList,getStartStation,getEndStation,setId,getLoginId,getStations,setEndStation,RouteInfo];edu.fudan.common.entity.RoutePlanInfo[getTravelDate,setStartStation,RoutePlanInfo,getStartStation,getEndStation,setNum,getNum,setTravelDate,setEndStation];edu.fudan.common.entity.RoutePlanResultUnit[setStopStations,setPriceForSecondClassSeat,getPriceForFirstClassSeat,setPriceForFirstClassSeat,getTrainTypeName,getPriceForSecondClassSeat,setTrainTypeName,getStopStations,setStartStation,getEndTime,getStartStation,getEndStation,RoutePlanResultUnit,setTripId,getTripId,setEndTime,getStartTime,setEndStation,setStartTime];edu.fudan.common.entity.Seat[getTravelDate,Seat,setDestStation,setStations,setTravelDate,getTotalNum,setTrainNumber,getDestStation,setTotalNum,setStartStation,getSeatType,getStartStation,getTrainNumber,getStations,setSeatType];edu.fudan.common.entity.SoldTicket[getTravelDate,getBusinessSeat,getSecondClassSeat,setBusinessSeat,getHardSeat,getSoftSeat,setTravelDate,setHardSeat,setFirstClassSeat,setSecondClassSeat,setTrainNumber,setNoSeat,getHardBed,getNoSeat,getFirstClassSeat,setSoftSeat,setHardBed,SoldTicket,getSoftBed,getTrainNumber,setHighSoftBed,getHighSoftBed,setSoftBed];edu.fudan.common.entity.Station[Station,setName,getName,getStayTime,setId,getId,setStayTime];edu.fudan.common.entity.StationFoodStore[StationFoodStore,getFoodList,getId,getDeliveryFee,setDeliveryFee,setTelephone,setBusinessTime,getStationName,getStoreName,getTelephone,setFoodList,setId,getBusinessTime,setStationName,setStoreName];edu.fudan.common.entity.Ticket[setStartStation,Ticket,getStartStation,setDestStation,getDestStation,getSeatNo,setSeatNo];edu.fudan.common.entity.TrainFood[setFoodList,setTripId,TrainFood,getTripId,getFoodList,setId,getId];edu.fudan.common.entity.TrainType[getEconomyClass,setName,setAverageSpeed,getName,getAverageSpeed,setEconomyClass,setConfortClass,setId,getId,TrainType,getConfortClass];edu.fudan.common.entity.Travel[Travel,setTrip,setDepartureTime,getDepartureTime,setEndPlace,getTrip,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TravelInfo[setLoginId,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,TravelInfo,getLoginId,getStartTime,setStartTime];edu.fudan.common.entity.TravelResult[setRoute,setPercent,isStatus,setTrainType,getTrainType,getPercent,getRoute,TravelResult,getStatus,getPrices,setStatus,setPrices];edu.fudan.common.entity.Trip[Trip,getTrainTypeName,getStartStationName,setStartStationName,getTerminalStationName,setTerminalStationName,getId,getRouteId,setTrainTypeName,setStationsName,getEndTime,getStationsName,setTripId,getTripId,setRouteId,setEndTime,setId,getStartTime,setStartTime];edu.fudan.common.entity.TripAllDetail[getTripResponse,setTrip,getMessage,TripAllDetail,setTripResponse,getStatus,setMessage,getTrip,setStatus];edu.fudan.common.entity.TripAllDetailInfo[getTravelDate,setTripId,setFrom,getTripId,setTravelDate,TripAllDetailInfo,setTo,getTo,getFrom];edu.fudan.common.entity.TripId[getNumber,getType,toString,setType,TripId,setNumber];edu.fudan.common.entity.TripInfo[TripInfo,setDepartureTime,getDepartureTime,setEndPlace,getStartPlace,getEndPlace,setStartPlace];edu.fudan.common.entity.TripResponse[TripResponse,setConfortClass,setPriceForEconomyClass,getTrainTypeName,getPriceForConfortClass,setTrainTypeName,getEconomyClass,setStartStation,getEndTime,getStartStation,setTripId,setEconomyClass,getTripId,getPriceForEconomyClass,setEndTime,setPriceForConfortClass,setTerminalStation,getTerminalStation,getStartTime,setStartTime,getConfortClass];edu.fudan.common.entity.User[setPassword,User,setDocumentNum,getDocumentType,getGender,setGender,getPassword,setEmail,setUserName,getUserName,getEmail,setDocumentType,getDocumentNum,getUserId,setUserId];rebook.entity.VerifyResult[getMessage,VerifyResult,getStatus,setMessage,setStatus];edu.fudan.common.exception.BaseException[BaseException];edu.fudan.common.exception.TokenException[TokenException];edu.fudan.common.security.jwt.JWTFilter[doFilterInternal,JWTFilter];edu.fudan.common.security.jwt.JWTUtil[JWTUtil,getJWTAuthentication,getTokenFromHeader,getRole,getUserName,getClaims,validateToken];edu.fudan.common.util.JsonUtils[jsonToMap,json2Object,JsonUtils,object2Json,conveterObject,object2Map];edu.fudan.common.util.Response[Response,getMsg,setData,getStatus,setMsg,getData,setStatus];edu.fudan.common.util.StringUtils[StringUtils,String2Lower,Date2String,String2Date];waitorder.config.SecurityConfig[passwordEncoder,corsConfigurer,SecurityConfig,configure];waitorder.controller.WaitListOrderController[WaitListOrderController,createNewOrder,home,getAllOrders,getWaitListOrders];waitorder.entity.WaitListOrder[setWaitUntilTime,setTravelTime,getId,getStatus,setPrice,getContactsName,getContactsId,hashCode,getWaitUtilTime,getTravelTime,setId,setContactsDocumentType,setCreatedTime,getTrainNumber,getFrom,setFrom,getTo,setTrainNumber,setContactsId,getContactsDocumentNumber,getPrice,setStatus,setContactsName,setWaitUtilTime,getSeatType,getAccountId,setTo,setContactsDocumentNumber,setAccountId,getCreatedTime,WaitListOrder,getContactsDocumentType,setSeatType];waitorder.entity.WaitListOrderVO[setFrom,getTo,setContactsId,setPrice,getPrice,getSeatType,WaitListOrderVO,getContactsId,setTripId,getAccountId,getTripId,setDate,setTo,getDate,setAccountId,setSeatType,getFrom];waitorder.repository.WaitListOrderRepository[findByAccountId,findById,deleteById,WaitListOrderRepository,findAll];waitorder.service.Impl.WaitListOrderServiceImpl[modifyWaitListOrderStatus,triggerThread,saveNewOrder,create,updateOrder,WaitListOrderServiceImpl,WaitListOrderExist,findOrderById,getAllOrders,getAllWaitListOrders];waitorder.service.WaitListOrderService[modifyWaitListOrderStatus,create,updateOrder,WaitListOrderService,findOrderById,getAllOrders,getAllWaitListOrders];waitorder.utils.PollThread[getServiceUrl,doPreserve,run,PollThread];waitorder.WaitOrderApplication[WaitOrderApplication,restTemplate,main];waitorder.service.Impl.WaitListOrderServiceImplTest[WaitListOrderServiceImplTest,setUp,findOrderById,getAllOrders];waitorder.WaitOrderApplicationTests[contextLoads,WaitOrderApplicationTests];"
            - name: OTEL_EXPORTER_OTLP_TRACES_ENDPOINT
              value: http://otelcol:4317
            - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
              value: cumulative
            - name: OTEL_SERVICE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['app']
            - name: JAVA_TOOL_OPTIONS
              value: "-javaagent:/otel/opentelemetry-javaagent.jar"
          envFrom:
            - secretRef:
                name: ts-wait-order-mysql
            - configMapRef:
                name: nacos
          ports:
            - containerPort: 17525
          resources:
            requests:
              cpu: 100m
              memory: 300Mi
            limits:
              cpu: 500m
              memory: 2000Mi
          readinessProbe:
            tcpSocket:
              port: 17525
            initialDelaySeconds: 60
            periodSeconds: 10
            timeoutSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ts-ui-dashboard
spec:
  selector:
    matchLabels:
      app: ts-ui-dashboard
  replicas: 1
  template:
    metadata:
      labels:
        app: ts-ui-dashboard
    spec:
      containers:
        - name: ts-ui-dashboard
          image: codewisdom/ts-ui-dashboard:1.0.1
          imagePullPolicy: IfNotPresent
          ports:
            - containerPort: 8080
          resources:
            requests:
              cpu: 50m
              memory: 100Mi
            limits:
              cpu: 500m
              memory: 500Mi
